<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Spark for Social Science</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Spark for Social Science">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Spark for Social Science" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="urbaninstitute/spark-social-science-manual" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Spark for Social Science" />
  
  
  

<meta name="author" content="Research Programming, The Urban Institute">


<meta name="date" content="2017-01-27">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-visualization.html">
<link rel="next" href="appendix.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Spark Social Science Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About Spark Social Science</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> - Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#outgrowing-the-server-when-should-social-scientists-consider-distributed-computing"><i class="fa fa-check"></i><b>1.1</b> Outgrowing the server: When should social scientists consider distributed computing?</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#making-distributed-computing-straightforward-cost-effective"><i class="fa fa-check"></i><b>1.2</b> Making distributed computing straightforward &amp; cost-effective</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-with-spark.html"><a href="getting-started-with-spark.html"><i class="fa fa-check"></i><b>2</b> - Getting Started with Spark</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-spark.html"><a href="getting-started-with-spark.html#what-about-stata-and-sas"><i class="fa fa-check"></i><b>2.1</b> What About Stata and SAS?</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-spark.html"><a href="getting-started-with-spark.html#choosing-between-sparkr-and-pyspark"><i class="fa fa-check"></i><b>2.2</b> Choosing Between SparkR and PySpark</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="understanding-spark.html"><a href="understanding-spark.html"><i class="fa fa-check"></i><b>3</b> - Understanding Spark</a><ul>
<li class="chapter" data-level="3.1" data-path="understanding-spark.html"><a href="understanding-spark.html#what-is-apache-spark"><i class="fa fa-check"></i><b>3.1</b> What is Apache Spark?</a></li>
<li class="chapter" data-level="3.2" data-path="understanding-spark.html"><a href="understanding-spark.html#what-makes-cluster-computing-different"><i class="fa fa-check"></i><b>3.2</b> What Makes Cluster Computing Different?</a></li>
<li class="chapter" data-level="3.3" data-path="understanding-spark.html"><a href="understanding-spark.html#what-makes-parallel-processing-different"><i class="fa fa-check"></i><b>3.3</b> What Makes Parallel Processing Different?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sorting-distributed-data.html"><a href="sorting-distributed-data.html"><i class="fa fa-check"></i><b>4</b> - Sorting Distributed Data</a><ul>
<li class="chapter" data-level="4.1" data-path="sorting-distributed-data.html"><a href="sorting-distributed-data.html#sorting-in-distributed-computing"><i class="fa fa-check"></i><b>4.1</b> Sorting in Distributed Computing</a></li>
<li class="chapter" data-level="4.2" data-path="sorting-distributed-data.html"><a href="sorting-distributed-data.html#shuffling-intuition"><i class="fa fa-check"></i><b>4.2</b> Shuffling Intuition</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>5</b> - Data Visualization</a><ul>
<li class="chapter" data-level="5.1" data-path="data-visualization.html"><a href="data-visualization.html#visualization-process"><i class="fa fa-check"></i><b>5.1</b> Visualization Process</a></li>
<li class="chapter" data-level="5.2" data-path="data-visualization.html"><a href="data-visualization.html#section"><i class="fa fa-check"></i><b>5.2</b> </a></li>
<li class="chapter" data-level="5.3" data-path="data-visualization.html"><a href="data-visualization.html#section-1"><i class="fa fa-check"></i><b>5.3</b> </a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="econometrics-and-large-scale-data.html"><a href="econometrics-and-large-scale-data.html"><i class="fa fa-check"></i><b>6</b> - Econometrics and Large-scale Data</a><ul>
<li class="chapter" data-level="6.1" data-path="econometrics-and-large-scale-data.html"><a href="econometrics-and-large-scale-data.html#implications-for-hypothesis-testing"><i class="fa fa-check"></i><b>6.1</b> Implications for Hypothesis Testing</a><ul>
<li class="chapter" data-level="6.1.1" data-path="econometrics-and-large-scale-data.html"><a href="econometrics-and-large-scale-data.html#statistical-v.-practical-significance"><i class="fa fa-check"></i><b>6.1.1</b> Statistical v. Practical Significance</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="econometrics-and-large-scale-data.html"><a href="econometrics-and-large-scale-data.html#mathematical-and-computational-implications"><i class="fa fa-check"></i><b>6.2</b> Mathematical and Computational Implications</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>7</b> - Appendix</a><ul>
<li class="chapter" data-level="7.1" data-path="appendix.html"><a href="appendix.html#unbounded-sample-size-statistical-significance-sketch-of-proof"><i class="fa fa-check"></i><b>7.1</b> Unbounded sample size &amp; statistical significance – sketch of proof</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="glossary-of-terms.html"><a href="glossary-of-terms.html"><i class="fa fa-check"></i><b>8</b> - Glossary of Terms</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Spark for Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="econometrics-and-large-scale-data" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> - Econometrics and Large-scale Data</h1>
<div id="implications-for-hypothesis-testing" class="section level2">
<h2><span class="header-section-number">6.1</span> Implications for Hypothesis Testing</h2>
<p>Policy researchers making frequentist inferences beware: when performing hypothesis tests on large-scale data, reliance on statistical significance for making meaningful assertions about the outcomes of hypothesis tests will often fail you. Any parameter that is not exactly equal to the null hypothesis value will become statistically significant as sample size, <span class="math inline">\(n\)</span>, increases infinitely, and with p-values that are much smaller in size than thresholds commonly used in social science (e.g. <span class="math inline">\(p &lt; 0.01\)</span>**). Note that, if the assumptions of a test are true and the true parameter is exactly equal to the null value, then a large sample size will not lead to a rejection of the null hypothesis.</p>
<p>In practice, however, we can easily extract statistically significant parameter estimates from any data with a size that would require the use of Spark. A true parameter value is very unlikely to be exactly equal to a specified null in reality: consequently, an extremely large sample size can increase the magnitude of the test statistic, and drive down the p-value far past standard thresholds of statistical significance.<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a> So, a parameter estimate that is arbitrarily close to the null value that is not statistically significant at a standard sample size (e.g. <span class="math inline">\(n = 15,000\)</span>) may become statistically significant if the number of observations drawn from the same population increased to several hundred million. While the estimate would be statistically significant, the parameter estimate would be so close in value to the null that the outcome may be uninteresting.</p>
<p>If arbitrarily small p-values are abundant, finding p-values that are smaller in size than traditional cutoffs for significance cannot be used as compelling evidence in building an empirical argument,<a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a> and policy researchers must employ alternative heuristics for making policy inferences in this context.</p>
<div id="statistical-v.-practical-significance" class="section level3">
<h3><span class="header-section-number">6.1.1</span> Statistical v. Practical Significance</h3>
<p>One conceptual shift that many researchers will need to make when working with massive data is that inference is no longer primarily about detecting some effect, but is rather focused on examining the data for evidence of an absence of an effect. In particular, the abundance of arbitrarily small p-values in massive data analysis requires that researchers give greater importance to identifying whether an estimate is practically significant rather than its likely statistical significance (since it is likely that the majority of estimates will be statistically significant).</p>
<p>One of the most important indicators of practical significance is effect size (e.g. correlation, regression coefficient or mean difference across groups) and, in conjunction, confidence intervals. Remember that the range of a confidence interval is determined by the critical value for the t-distribution, the standard deviation estimate and sample size. Reporting the effect size of a parameter through confidence intervals:</p>
<ol style="list-style-type: decimal">
<li>Provides a more precise description of the magnitude and direction of an effect relative to reporting only the parameter estimate and, more generally, and</li>
<li>Describes the confidence of the parameter estimate being true rather than rejecting (or failing to reject) a null hypothesis.</li>
</ol>
<p>Although the large sample size can cause the range of the confidence intervals to be extremely small, using statements of confidence to examine the importance of a parameter estimate is a useful strategy when implementing a hypothesis test that is very sensitive (e.g. the simple <span class="math inline">\(H_0\)</span>: <span class="math inline">\(\theta = 0\)</span> hypothesis test). Note that this approach requires researchers to make some a priori decision about what constitutes an practically significant value in the context of their research question.</p>
</div>
</div>
<div id="mathematical-and-computational-implications" class="section level2">
<h2><span class="header-section-number">6.2</span> Mathematical and Computational Implications</h2>
<p>In addition to the theoretical implications of working with massive data discussed above, analyzing data with Spark also has computational implications that policy researchers should be aware of. Spark fits linear models using iterative optimization methods that are well-suited for large-scale and distributed computation.</p>
<p>Specifically, these methods use iterative algorithms to minimize the cost function of the linear model. Currently, the SparkR operation <code>spark.glm</code> uses only iteratively reweighted least squares <a href="http://spark.apache.org/docs/latest/ml-advanced.html#iteratively-reweighted-least-squares-irls">IRLS</a> to fit a linear model. This “solver” can fit a model with a maximum number of 4096 model features. PySpark similarly fits linear models using IRLS with the <code>GeneralizedLinearRegression</code> operation, which also can interpret up to 4096 feature models. If needed, there are PySpark operations that allow researchers to fit linear models with more than 4096: <code>LinearRegression</code> and <code>LogisticRegression</code> fit linear models using the Limited-memory Broyden–Fletcher–Goldfarb–Shanno <a href="http://spark.apache.org/docs/latest/ml-advanced.html#limited-memory-bfgs-l-bfgs">L-BFGS</a> algorithm. L-BFGS approximates a local minimum of the cost function of a model. However, as long as the cost function of the model is convex, the function will have only one global minimum and no other local minima—remember that the cost function for a linear regression model is a convex quadratic function. Therefore, L-BFGS will consistently compute parameter estimates for standard social science models.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p>In the appendix, we provide a sketch of a proof for the claim that some mean parameter estimate of a random variable will become trivially statistically significant as n goes to infinity (if the true value is not exactly equal to the null). We can similarly show that differences in mean parameter estimates, regression coefficient estimates and linear combinations of coefficient estimates behave this way under unbounded <span class="math inline">\(n\)</span>.<a href="econometrics-and-large-scale-data.html#fnref5">↩</a></p></li>
<li id="fn6"><p>While small p-values are not sufficient for making meaningful inferences, they are necessary for making inferences with statistical confidence. If a hypothesis test results in a small test statistic and, therefore, a large p-value, then: the sample is still not sufficiently large to accurately estimate the parameter, we have estimated the parameter with too little precision or the true parameter is arbitrarily close to the null or some combination of listed reasons.<a href="econometrics-and-large-scale-data.html#fnref6">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-visualization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/06-econometrics.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
